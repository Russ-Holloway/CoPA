/*
 * CoPPA Citation Panel Layout Override
 * Manual CSS file to fix citation panel and answer area sizing
 * 
 * INSTRUCTIONS:
 * 1. Copy this entire file content
 * 2. In your deployed app, add this CSS to override the existing styles
 * 3. This can be added via browser dev tools or injected into the app
 */

/* ===== CITATION PANEL SIZING - INCREASED TO 900PX ===== */

/* Main citation panel styling */
.citationPanel,
[class*="citationPanel"] {
  flex: 0 0 min(40vw, 600px) !important;
  max-width: min(40vw, 600px) !important;
  min-width: 320px !important;
  width: min(40vw, 600px) !important;
  background: var(--bg-secondary) !important;
  padding: 20px !important;
  box-shadow: 0px 2px 4px var(--shadow-light), 0px 0px 2px var(--shadow-light) !important;
  border-radius: 8px !important;
  order: 0 !important;
  align-self: stretch !important;
  overflow-y: scroll !important;
  max-height: calc(100vh - 100px) !important;
  color: var(--text-primary) !important;
  transition: background 0.3s ease, color 0.3s ease !important;
}

/* FluentUI Stack.Item override for citation panel */
.ms-Stack-item.citationPanel,
.ms-Stack-item[class*="citationPanel"] {
  flex: 0 0 min(40vw, 600px) !important;
  max-width: min(40vw, 600px) !important;
  min-width: 320px !important;
  width: min(40vw, 600px) !important;
}

/* ===== ANSWER AREA SIZING - INCREASED FOR BETTER SPACE USAGE ===== */

/* Remove Answer component max-width constraint */
.answerText {
  max-width: none !important;
}

/* Chat message sizing when citation panel is present */
.chatMessageGpt {
  margin-bottom: 16px;
  max-width: 100% !important;
  width: 100% !important;
  display: flex;
  background: transparent;
  color: var(--text-primary);
}

/* Chat message stream container */
.chatMessageStream {
  flex-grow: 1 !important;
  max-width: 1600px !important;
  width: 100% !important;
  overflow-y: auto;
  padding: 24px;
  display: flex;
  flex-direction: column;
  margin: 0 auto;
  background: transparent;
  color: var(--text-primary);
}

/* When no citation panel is present - full width usage */
.chatRoot:not(:has(.citationPanel)) .chatContainer {
  width: 100% !important;
  max-width: 100% !important;
  flex: 1 !important;
}

.chatRoot:not(:has(.citationPanel)) .chatMessageStream {
  max-width: 100% !important;
  width: 100% !important;
  flex: 1 !important;
  padding: 24px 40px !important;
}

.chatRoot:not(:has(.citationPanel)) .chatMessageGpt {
  max-width: 100% !important;
  width: 100% !important;
  flex: 1 !important;
}

/* ===== INPUT AREAS - INCREASED WIDTH ===== */

.inputFullWidth {
  width: 95% !important;
  max-width: 100% !important;
  margin: 0 auto;
}

.chatInput {
  padding: 24px;
  width: 100% !important;
  max-width: 100% !important;
  margin: 0 auto;
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.chatInputCentered {
  align-items: center;
  width: 100%;
  max-width: 100%;
  margin: 40px auto;
  padding: 20px;
}

.inputRow {
  align-items: flex-end;
  gap: 32px;
  width: 100%;
  justify-content: center;
  max-width: 100%;
}

/* ===== ERROR MESSAGE SIZING ===== */

.chatMessageError {
  order: 0;
  flex-grow: 0;
  max-width: 100%;
  margin-bottom: 12px;
}

/* ===== RESPONSIVE DESIGN ===== */

/* Mobile/Tablet adjustments */
@media (max-width: 768px) {
  .citationPanel,
  [class*="citationPanel"] {
    flex: 0 0 500px !important;
    max-width: 500px !important;
    min-width: 450px !important;
    width: 500px !important;
  }
  
  /* Stack citation panel below chat on mobile */
  .chatRoot {
    flex-direction: column;
  }
  
  .chatMessageStream {
    max-width: 100% !important;
  }
  
  .chatMessageGpt {
    max-width: 100% !important;
  }
}

/* ===== FORCE OVERRIDES - HIGHEST SPECIFICITY ===== */

/* Ultimate fallback overrides in case other CSS conflicts */
body .citationPanel,
body [class*="citationPanel"] {
  flex: 0 0 min(40vw, 600px) !important;
  max-width: min(40vw, 600px) !important;
  width: min(40vw, 600px) !important;
}

body .chatMessageGpt {
  max-width: 100% !important;
}

body .answerText {
  max-width: none !important;
}

/*
 * END OF OVERRIDE CSS
 * 
 * This CSS file contains all the layout improvements for:
 * - Larger citation panel (600px instead of cramped 40% width)
 * - Larger answer areas (1200px instead of 700-800px)
 * - Better screen space utilization
 * - Responsive design for mobile/tablet
 */
